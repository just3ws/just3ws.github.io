{% assign conf = nil %}
{% if item.conference %}
  {% assign conf = site.data.ugtastic_conferences.conferences | where: "slug", item.conference | first %}
{% endif %}
{% if item.community %}
  {% assign comm = site.data.ugtastic_communities.communities | where: "slug", item.community | first %}
{% endif %}
{% assign title_text = item.topic | default: item.title %}
{% assign detail_url = "/ugtastic/videos/" | append: item.id | append: "/" %}

<div class="video">
  {% assign thumb = item.thumbnail_local | default: item.thumbnail %}
  {% if thumb %}
    <a class="video-thumb" href="{{ detail_url }}">
      <img src="{{ thumb }}" alt="Thumbnail for {{ item.title }}">
    </a>
  {% endif %}
  <div class="video-body">
    <div class="video-title">
      <a href="{{ detail_url }}">{{ title_text }}</a>
    </div>
    {% if conf %}
      <div class="video-subtitle">Conference: <a href="/ugtastic/conferences/{{ item.conference }}/">{{ conf.name }}</a></div>
    {% elsif comm %}
      <div class="video-subtitle">Community: <a href="/ugtastic/communities/{{ item.community }}/">{{ comm.name }}</a></div>
    {% endif %}
    {% if item.interviewees and item.interviewees.size > 0 %}
      <div class="video-subtitle">
        {% if item.interviewees.size == 1 %}Interviewee{% else %}Interviewees{% endif %}: {{ item.interviewees | join: ", " }}
      </div>
    {% endif %}
    <div class="video-meta">
      {% if item.duration_minutes %}Duration: {{ item.duration_minutes | round }} min Â· {% endif %}Uploaded: {{ item.created | date: "%b %d, %Y" }}
    </div>
    <div class="video-actions">
      <a class="video-button primary" href="{{ detail_url }}">Watch Here</a>
      <a class="video-button" href="{{ item.link }}">Watch on Vimeo</a>
    </div>
    {% if item.tags and item.tags.size > 0 %}
      <div class="video-tags">
        {% for tag in item.tags %}
          <span class="tag">{{ tag }}</span>
        {% endfor %}
      </div>
    {% endif %}
    {% if item.description %}
      <div class="video-description"><span class="video-description-label">Vimeo description:</span> {{ item.description }}</div>
    {% endif %}
  </div>
</div>
