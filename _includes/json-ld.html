<!-- JSON-LD Structured Data for ATS and Search Engines -->
{% assign site_url = site.url | default: "https://www.just3ws.com" %}
{% if site_url == "" or site_url contains "localhost" %}
  {% assign site_url = "https://www.just3ws.com" %}
{% endif %}
{% assign profile = site.data.resume.profile %}
{% assign summary = site.data.resume.summary %}
{% assign person_id = site_url | append: "/id/person/mike-hall" %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "@id": "{{ person_id }}",
  "name": {{ profile.name | default: "Mike Hall" | jsonify }},
  "givenName": "Mike",
  "familyName": "Hall",
  "alternateName": "just3ws",
  "url": "{{ site_url }}/",
  "email": "mailto:{{ profile.contact.email }}",
  "telephone": {{ profile.contact.phone_tel | default: "+18478773825" | jsonify }},
  "jobTitle": {{ profile.title | default: "Staff Software Engineer" | jsonify }},
  "description": {{ summary.text | strip | jsonify }},
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ site_url }}/"
  },
  "sameAs": [
    {{ profile.contact.linkedin.url | jsonify }},
    {{ profile.contact.github.url | jsonify }}
  ],
  "knowsAbout": [
    "Ruby",
    "Ruby on Rails",
    "PostgreSQL",
    "Redis",
    "SQL",
    "JavaScript",
    "C#",
    "Java",
    "Clojure",
    "Linux",
    "AWS",
    "OpenTelemetry",
    "CI/CD",
    "Architectural Ownership",
    "Platform Modernization",
    "Observability Strategy",
    "Incident Response & Postmortems",
    "Risk Management",
    "Cross-Team Influence",
    "Technical Strategy",
    "Mentoring",
    "AI-augmented development (pairing, review, refactoring)",
    "System Reliability"
  ],
  "hasOccupation": [
    {% for item in site.data.resume.timeline.items %}
    {% assign position = site.data.resume.positions[item] %}
    {% if position %}
    {
      "@type": "Occupation",
      "name": "{{ position.title }}",
      {% if position.description %}"description": {{ position.description | jsonify }},{% endif %}
      {% if position.skills %}"skills": "{{ position.skills | join: ', ' }}",{% endif %}
      "occupationLocation": {
        "@type": "AdministrativeArea",
        "name": "{{ position.company.location | default: 'Remote' }}"
      }
    }{% unless forloop.last %},{% endunless %}
    {% endif %}
    {% endfor %}
  ],
  "subjectOf": {
    "@type": "ItemList",
    "@id": "{{ site_url }}/id/list/career-history",
    "name": "Career History",
    "numberOfItems": {{ site.data.resume.timeline.history.size }},
    "itemListElement": [
      {% for item in site.data.resume.timeline.history %}
      {% assign position = site.data.resume.positions[item] %}
      {% if position %}
      {
        "@type": "ListItem",
        "position": {{ forloop.index }},
        "item": {
          "@type": "Occupation",
          "@id": "{{ site_url }}/id/occupation/{{ item }}",
          "name": {{ position.title | jsonify }},
          "description": {{ position.description | default: "" | strip | jsonify }},
          "occupationLocation": {
            "@type": "AdministrativeArea",
            "name": {{ position.company.location | default: "Remote" | jsonify }}
          }
        }
      }{% unless forloop.last %},{% endunless %}
      {% endif %}
      {% endfor %}
    ]
  },
  "knowsLanguage": [
    {
      "@type": "Language",
      "name": "English"
    }
  ]
}
</script>
